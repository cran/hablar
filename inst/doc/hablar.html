<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="David Sjoberg" />


<title>An introduction to hablar</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">An introduction to hablar</h1>
<h4 class="author">David Sjoberg</h4>



<p>The mission of <code>hablar</code> is for you to get non-astonishing results! That means that functions return what you expected. R has some intuitive quirks that beginners and experienced programmers fail to identify. Some of the first weird features of R that <code>hablar</code> solves:</p>
<ul>
<li><p>Missing values <code>NA</code> and irrational values <code>Inf</code>, <code>NaN</code> is dominant. For example, in R <code>sum(c(1, 2, NA))</code> is <code>NA</code> and not 3. In <code>hablar</code> the addition of an underscore <code>sum_(c(1, 2, NA))</code> returns 3, as is often expected.</p></li>
<li><p>Factors (categorical variables) that are converted to numeric returns the number of the category rather than the value. In <code>hablar</code> the <code>convert()</code> function always changes the type of the values.</p></li>
<li><p>Finding duplicates, and rows with <code>NA</code> can be cumbersome. The functions <code>find_duplicates()</code> and <code>find_na()</code> make it easy to find where the data frame needs to be fixed. When the issues are found the utility replacement functions, e.g. <code>if_else_()</code>, <code>if_na()</code>, <code>zero_if()</code> easily fixes many of the most common problems you face.</p></li>
</ul>
<p><code>hablar</code> follows the syntax API of <code>tidyverse</code> and works seamlessly with <code>dplyr</code> and <code>tidyselect</code>.</p>
<div id="missing-values-that-astonishes-you" class="section level2">
<h2>Missing values that astonishes you</h2>
<p>A common issue in R is how R treats missing values (i.e. <code>NA</code>). Sometimes <code>NA</code> in your data frame means that there is missing values in the sense that you need to estimate or replace them with values. But often it is not a problem! Often <code>NA</code> means that there <em>is</em> no value, and should not be. <code>hablar</code> provide useful functions that handle <code>NA</code> intuitively. Letâ€™s take a simple example:</p>
<pre><code>#&gt; # A tibble: 3 x 3
#&gt;   name    graduation_date   age
#&gt;   &lt;chr&gt;   &lt;date&gt;          &lt;int&gt;
#&gt; 1 Fredrik 2016-06-15         21
#&gt; 2 Maria   NA                 16
#&gt; 3 Astrid  2014-06-15         23</code></pre>
<div id="change-min-to-min_" class="section level5">
<h5><strong>Change <code>min()</code> to <code>min_()</code></strong></h5>
<p>The <code>graduation_date</code> is missing for Maria. In this case it is not because we do not know. It is because she has not graduated yet, she is younger than Fredrik and Astrid. If we would like to know the first graduation date of the three observation in R with a naive <code>min()</code> we get <code>NA</code>. But with <code>min_()</code> from <code>hablar</code> we get the minimum value that is not missing. See:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">min_baseR =</span> <span class="kw">min</span>(graduation_date),</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">         <span class="dt">min_hablar =</span> <span class="kw">min_</span>(graduation_date))</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; # A tibble: 3 x 5</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt;   name    graduation_date   age min_baseR  min_hablar</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;   &lt;date&gt;          &lt;int&gt; &lt;date&gt;     &lt;date&gt;    </span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; 1 Fredrik 2016-06-15         21 NA         2014-06-15</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; 2 Maria   NA                 16 NA         2014-06-15</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; 3 Astrid  2014-06-15         23 NA         2014-06-15</span></a></code></pre></div>
<p>The <code>hablar</code> package provides the same functionality for</p>
<ul>
<li><code>max_()</code></li>
<li><code>mean_()</code></li>
<li><code>median_()</code></li>
<li><code>sd_()</code></li>
<li><code>first_()</code></li>
</ul>
<p>â€¦ and more. For more documentation type <code>help(min_())</code> or <code>vignette(&quot;s&quot;)</code> for an in-depth description.</p>
</div>
</div>
<div id="change-type-in-a-snap---safely" class="section level2">
<h2>Change type in a snap - safely</h2>
<p>In <code>hablar</code> the function <code>convert</code> provides a robust, readable and dynamic way to change type of a column.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw">convert</span>(<span class="kw">int</span>(cyl, am),</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">          <span class="kw">num</span>(disp<span class="op">:</span>drat))</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; # A tibble: 32 x 11</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt;     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; 1  21       6   160   110  3.9   2.62  16.5     0     1     4     4</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; 2  21       6   160   110  3.9   2.88  17.0     0     1     4     4</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; 3  22.8     4   108    93  3.85  2.32  18.6     1     1     4     1</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; 4  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; # â€¦ with 28 more rows</span></a></code></pre></div>
<p>The above chunk converts the columns <code>cyl</code> and <code>am</code> to integers, and the columns <code>disp</code> through <code>drat</code> to numeric. If a column is of type <code>factor</code> it always converts it to character before further conversion.</p>
<div id="fix-all-your-types-in-the-same-function" class="section level5">
<h5><strong>Fix all your types in the same function</strong></h5>
<p>With <code>convert</code> and <code>tidyselect</code> you can easily change type of a wide range of columns.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw">convert</span>(</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">    <span class="kw">chr</span>(<span class="kw">last_col</span>()),       <span class="co"># Last colum to character</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    <span class="kw">int</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>),              <span class="co"># First two columns to integer</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">    <span class="kw">fct</span>(hp, wt),           <span class="co"># hp and wt to factors</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">    <span class="kw">dte</span>(vs),               <span class="co"># vs to date (if you really want)</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">    <span class="kw">num</span>(<span class="kw">contains</span>(<span class="st">&quot;car&quot;</span>))   <span class="co"># car as in carb to numeric</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8">  )           </a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; # A tibble: 32 x 11</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt;     mpg   cyl  disp hp     drat wt     qsec vs            am  gear  carb</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; 1    21     6   160 110    3.9  2.62   16.5 1970-01-01     1     4     4</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; 2    21     6   160 110    3.9  2.875  17.0 1970-01-01     1     4     4</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt; 3    22     4   108 93     3.85 2.32   18.6 1970-01-02     1     4     1</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt; 4    21     6   258 110    3.08 3.215  19.4 1970-01-02     0     3     1</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; # â€¦ with 28 more rows</span></a></code></pre></div>
<p>For more information, see <code>help(hablar)</code> or <code>vignette(&quot;convert&quot;)</code>.</p>
</div>
</div>
<div id="find-the-problem" class="section level2">
<h2>Find the problem</h2>
<p>When cleaning data you spend a lot of time understanding your data. Sometimes you get more row than you expected when doing a <code>left_join()</code>. Or you did not know that certain column contained missing values <code>NA</code> or irrational values like <code>Inf</code> or <code>NaN</code>.</p>
<p>In <code>hablar</code> the <code>find_*</code> functions speeds up your search for the problem. To find duplicated rows you simply <code>df %&gt;% find_duplicates()</code>. You can also find duplicates in in specific columns, which can be useful before joins.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Create df with duplicates</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">df &lt;-<span class="st"> </span>mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw">bind_rows</span>(mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">9</span>))</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co"># Return rows with duplicates in cyl and am</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="st">  </span><span class="kw">find_duplicates</span>(cyl, am)</a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; # A tibble: 35 x 11</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt;     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; 1  21       6   160   110  3.9   2.62  16.5     0     1     4     4</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; 2  21       6   160   110  3.9   2.88  17.0     0     1     4     4</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; 3  22.8     4   108    93  3.85  2.32  18.6     1     1     4     1</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; 4  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; # â€¦ with 31 more rows</span></a></code></pre></div>
<p>There are also find functions for other cases. For example <code>find_na()</code> returns rows with missing values.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">starwars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw">find_na</span>(height)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; # A tibble: 6 x 13</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;   name  height  mass hair_color skin_color eye_color birth_year gender homeworld</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; 1 Arveâ€¦     NA    NA brown      fair       brown             NA male   &lt;NA&gt;     </span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; 2 Finn      NA    NA black      dark       dark              NA male   &lt;NA&gt;     </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; 3 Rey       NA    NA brown      light      hazel             NA female &lt;NA&gt;     </span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; 4 Poe â€¦     NA    NA brown      light      brown             NA male   &lt;NA&gt;     </span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt; # â€¦ with 2 more rows, and 4 more variables: species &lt;chr&gt;, films &lt;list&gt;,</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt; #   vehicles &lt;list&gt;, starships &lt;list&gt;</span></a></code></pre></div>
<p>If you rather want a Boolean value instead then e.g. <code>check_duplicates()</code> returns <code>TRUE</code> if the data frame contains duplicates, otherwise it returns <code>FALSE</code>.</p>
<div id="apply-the-solution" class="section level5">
<h5><strong>â€¦apply the solution</strong></h5>
<p>Letâ€™s say that we have found a problem is caused by missing values in the column <code>height</code> and you want to replace all missing values with the integer 100. <code>hablar</code> comes with an additional ways of doing if-or-else.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">starwars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw">find_na</span>(height) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">height =</span> <span class="kw">if_na</span>(height, 100L))</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; # A tibble: 6 x 13</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;   name  height  mass hair_color skin_color eye_color birth_year gender homeworld</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; 1 Arveâ€¦    100    NA brown      fair       brown             NA male   &lt;NA&gt;     </span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; 2 Finn     100    NA black      dark       dark              NA male   &lt;NA&gt;     </span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; 3 Rey      100    NA brown      light      hazel             NA female &lt;NA&gt;     </span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; 4 Poe â€¦    100    NA brown      light      brown             NA male   &lt;NA&gt;     </span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; # â€¦ with 2 more rows, and 4 more variables: species &lt;chr&gt;, films &lt;list&gt;,</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; #   vehicles &lt;list&gt;, starships &lt;list&gt;</span></a></code></pre></div>
<p>In the chunk above we successfully replaced all missing heights with the integer 100. <code>hablar</code> also contain the self explained:</p>
<ul>
<li><code>if_zero()</code> and <code>zero_if()</code></li>
<li><code>if_inf()</code> and <code>inf_if()</code></li>
<li><code>if_nan()</code> and <code>nan_if()</code></li>
</ul>
<p>which works in the same way as the examples above.</p>
</div>
<div id="introducing-a-third-way-to-if-or-else" class="section level5">
<h5><strong>Introducing a third way to if or else</strong></h5>
<p>The generic function <code>if_else_()</code> provides the same rigidity as <code>if_else()</code> in <code>dplyr</code> but ads some flexibility. In <code>dplyr</code> you need to specify which type <code>NA</code> should have. In <code>if_else_()</code> you can write:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">starwars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">skin_color =</span> <span class="kw">if_else_</span>(hair_color <span class="op">==</span><span class="st"> &quot;brown&quot;</span>, <span class="ot">NA</span>, hair_color))</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; # A tibble: 87 x 13</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt;   name  height  mass hair_color skin_color eye_color birth_year gender homeworld</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; 1 Lukeâ€¦    172    77 blond      blond      blue            19   male   Tatooine </span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; 2 C-3PO    167    75 &lt;NA&gt;       &lt;NA&gt;       yellow         112   &lt;NA&gt;   Tatooine </span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; 3 R2-D2     96    32 &lt;NA&gt;       &lt;NA&gt;       red             33   &lt;NA&gt;   Naboo    </span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; 4 Dartâ€¦    202   136 none       none       yellow          41.9 male   Tatooine </span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; # â€¦ with 83 more rows, and 4 more variables: species &lt;chr&gt;, films &lt;list&gt;,</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt; #   vehicles &lt;list&gt;, starships &lt;list&gt;</span></a></code></pre></div>
<p>In <code>if_else()</code> from <code>dplyr</code> you would have had to specified <code>NA_character_</code>.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
